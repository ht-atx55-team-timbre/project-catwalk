{"ast":null,"code":"import _regeneratorRuntime from\"/home/eric-cruz/Desktop/VS/Senior-HR/FEC/project-catwalk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _toConsumableArray from\"/home/eric-cruz/Desktop/VS/Senior-HR/FEC/project-catwalk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _asyncToGenerator from\"/home/eric-cruz/Desktop/VS/Senior-HR/FEC/project-catwalk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/home/eric-cruz/Desktop/VS/Senior-HR/FEC/project-catwalk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useState,useEffect,useRef}from'react';import request from'./Requests';import AddOutfitCard from'./AddOutfitCard';import{Grid,Typography}from'@material-ui/core';import Carousel from'react-material-ui-carousel';import RelatedCard from'./RelatedCard';import OutfitCard from'./OutfitCard';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Related=function Related(_ref){var product_id=_ref.product_id,handleIdChange=_ref.handleIdChange;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),outfits=_useState2[0],setOutfits=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),related=_useState4[0],setRelated=_useState4[1];var currItemRef=useRef(0);var currOutfitArrayRef=useRef([]);useEffect(function(){function createRelatedItems(array){var relatedItems=[];var results=[];var chunk=4;for(var i=0;i<array.length;i++){relatedItems.push(/*#__PURE__*/_jsx(RelatedCard,{item:array[i],original:product_id,handleIdChange:handleIdChange},i));}for(var _i=0;_i<relatedItems.length;_i+=chunk){var tempArr=relatedItems.slice(_i,_i+chunk);results.push(tempArr);}return results;}function getRelated(){return _getRelated.apply(this,arguments);}function _getRelated(){_getRelated=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var results,uniqueResults;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return request.get(\"/\".concat(product_id,\"/related\"));case 2:results=_context.sent;console.log(results);uniqueResults=_toConsumableArray(new Set(results.data));setRelated(createRelatedItems(uniqueResults));currItemRef.current=product_id;case 7:case\"end\":return _context.stop();}}},_callee);}));return _getRelated.apply(this,arguments);};getRelated();},[product_id,handleIdChange]);var createOutfitItems=function createOutfitItems(array){var outfitItems=[];var results=[];var chunk=3;for(var i=0;i<array.length;i++){outfitItems.push(/*#__PURE__*/_jsx(OutfitCard,{item:array[i],removeOutfit:handleOutfitRemove,handleIdChange:handleIdChange},i));}for(var _i2=0;_i2<outfitItems.length;_i2+=chunk){var tempArr=[];tempArr.push(/*#__PURE__*/_jsx(AddOutfitCard,{addOutfit:handleOutfitAdd},'add'));tempArr.push(outfitItems.slice(_i2,_i2+chunk));results.push(tempArr);}setOutfits(results);};var handleOutfitAdd=function handleOutfitAdd(){var itemsArray=currOutfitArrayRef.current;if(!itemsArray.includes(currItemRef.current)){itemsArray.push(currItemRef.current);}currOutfitArrayRef.current=itemsArray;createOutfitItems(itemsArray);};var handleOutfitRemove=function handleOutfitRemove(id){var newOutfitArray=currOutfitArrayRef.current;var result=[];for(var i=0;i<newOutfitArray.length;i++){if(newOutfitArray[i]!==id){result.push(newOutfitArray[i]);}}currOutfitArrayRef.current=result;createOutfitItems(result);};return/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:12,direction:\"column\",children:[/*#__PURE__*/_jsx(Grid,{container:true,item:true,xs:12,children:/*#__PURE__*/_jsx(Typography,{children:\"Related Products:\"})}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsx(Grid,{container:true,item:true,justify:\"center\",xs:12,children:/*#__PURE__*/_jsx(Carousel,{autoPlay:false,navButtonsWrapperProps:{style:{bottom:'100px',height:'50%',top:'unset'}},children:related.map(function(item,idx){if(item.length>1){return/*#__PURE__*/_jsx(Grid,{container:true,item:true,direction:\"row\",justify:\"space-evenly\",spacing:10,xs:12,children:item},idx);}else{return/*#__PURE__*/_jsx(Grid,{container:true,item:true,direction:\"row\",spacing:10,xs:12,children:item},idx);}})})}),/*#__PURE__*/_jsxs(Grid,{container:true,item:true,xs:12,children:[/*#__PURE__*/_jsx(Typography,{children:\"Your Outfit:\"}),/*#__PURE__*/_jsx(Grid,{container:true,item:true,justify:\"center\",xs:12,children:/*#__PURE__*/_jsx(Carousel,{autoPlay:false,navButtonsWrapperProps:{style:{bottom:'100px',height:'50%',top:'unset'}},children:currOutfitArrayRef.current.length===0?/*#__PURE__*/_jsx(AddOutfitCard,{addOutfit:handleOutfitAdd},'add'):outfits.map(function(item,idx){return/*#__PURE__*/_jsx(Grid,{container:true,item:true,direction:\"row\",justify:\"space-evenly\",spacing:10,xs:12,children:item},idx);})})})]})]})]});};export default Related;","map":{"version":3,"sources":["/home/eric-cruz/Desktop/VS/Senior-HR/FEC/project-catwalk/client/src/related-components/Related.js"],"names":["useState","useEffect","useRef","request","AddOutfitCard","Grid","Typography","Carousel","RelatedCard","OutfitCard","Related","product_id","handleIdChange","outfits","setOutfits","related","setRelated","currItemRef","currOutfitArrayRef","createRelatedItems","array","relatedItems","results","chunk","i","length","push","tempArr","slice","getRelated","get","console","log","uniqueResults","Set","data","current","createOutfitItems","outfitItems","handleOutfitRemove","handleOutfitAdd","itemsArray","includes","id","newOutfitArray","result","style","bottom","height","top","map","item","idx"],"mappings":"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","sourcesContent":["import { useState, useEffect, useRef } from 'react';\nimport request from './Requests';\nimport AddOutfitCard from './AddOutfitCard';\nimport { Grid, Typography } from '@material-ui/core';\nimport Carousel from 'react-material-ui-carousel';\nimport RelatedCard from './RelatedCard';\nimport OutfitCard from './OutfitCard';\n\nconst Related = ({ product_id, handleIdChange }) => {\n\n  const [outfits, setOutfits] = useState([]);\n  const [related, setRelated] = useState([]);\n  const currItemRef = useRef(0);\n  const currOutfitArrayRef = useRef([]);\n\n  useEffect(() => {\n    function createRelatedItems(array) {\n      let relatedItems = [];\n      let results = [];\n      let chunk = 4;\n      for (let i = 0; i < array.length; i++) {\n        relatedItems.push(<RelatedCard key={i} item={array[i]} original={product_id} handleIdChange={handleIdChange} />)\n      }\n      for (let i = 0; i < relatedItems.length; i += chunk) {\n        let tempArr = relatedItems.slice(i, i+chunk);\n        results.push(tempArr);\n      }\n      return results;\n    }\n\n    async function getRelated() {\n      const results = await request.get(`/${product_id}/related`);\n      console.log(results);\n      let uniqueResults = [...new Set(results.data)]\n      setRelated(createRelatedItems(uniqueResults));\n      currItemRef.current = product_id;\n    };\n\n    getRelated();\n  }, [product_id, handleIdChange])\n\n  const createOutfitItems = (array) => {\n    let outfitItems = [];\n    let results = [];\n    let chunk = 3;\n    for (let i = 0; i < array.length; i++) {\n      outfitItems.push(<OutfitCard key={i} item={array[i]} removeOutfit={handleOutfitRemove} handleIdChange={handleIdChange} />)\n    }\n    for (let i = 0; i < outfitItems.length; i+=chunk) {\n      let tempArr = [];\n      tempArr.push(<AddOutfitCard key='add' addOutfit={handleOutfitAdd} />);\n      tempArr.push(outfitItems.slice(i, i+chunk));\n      results.push(tempArr);\n    }\n    setOutfits(results);\n  }\n\n  const handleOutfitAdd = () => {\n    let itemsArray = currOutfitArrayRef.current;\n    if (!itemsArray.includes(currItemRef.current)) {\n      itemsArray.push(currItemRef.current);\n    }\n    currOutfitArrayRef.current = itemsArray;\n    createOutfitItems(itemsArray);\n  }\n\n  const handleOutfitRemove = (id) => {\n    let newOutfitArray = currOutfitArrayRef.current;\n    let result = [];\n    for (let i = 0; i < newOutfitArray.length; i++) {\n      if (newOutfitArray[i] !== id) {\n        result.push(newOutfitArray[i])\n      }\n    }\n    currOutfitArrayRef.current = result;\n    createOutfitItems(result);\n  }\n\n  return (\n    <Grid container item xs={12} direction='column'>\n      <Grid container item xs={12}>\n        <Typography>Related Products:</Typography>\n      </Grid>\n      <Grid container>\n        <Grid container item justify=\"center\" xs={12}>\n          <Carousel autoPlay={false} navButtonsWrapperProps={{\n        style: {\n            bottom: '100px',\n            height: '50%',\n            top: 'unset'\n          }\n        }}>\n            {related.map((item, idx) => {\n              if (item.length > 1) {\n                return (\n                  <Grid key={idx} container item direction='row' justify='space-evenly' spacing={10} xs={12}>{item}</Grid>\n                )\n              }else{\n                return (\n                  <Grid container item direction='row' spacing={10} xs={12} key={idx}>{item}</Grid>\n                )\n              }\n            })\n          }\n\n          </Carousel>\n        </Grid>\n        <Grid container item xs={12}>\n        <Typography>Your Outfit:</Typography>\n      <Grid container item justify=\"center\" xs={12}>\n        <Carousel autoPlay={false} navButtonsWrapperProps={{\n        style: {\n            bottom: '100px',\n            height: '50%',\n            top: 'unset'\n          }\n        }}>\n          {currOutfitArrayRef.current.length === 0 ? <AddOutfitCard key='add' addOutfit={handleOutfitAdd} /> : (outfits.map((item, idx) => (<Grid container item direction='row' justify='space-evenly' spacing={10} xs={12} key={idx}>{item}</Grid>)))}\n        </Carousel>\n      </Grid>\n        </Grid>\n      </Grid>\n    </Grid>\n  )\n}\n\nexport default Related;"]},"metadata":{},"sourceType":"module"}