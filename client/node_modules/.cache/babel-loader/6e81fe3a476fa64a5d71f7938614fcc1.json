{"ast":null,"code":"import _slicedToArray from\"/home/eric-cruz/Desktop/VS/Senior-HR/FEC/project-catwalk/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Grid,Box,Typography,Divider}from'@material-ui/core';import axios from'axios';import _ from'underscore';import Answers from'./Answers.jsx';import HelpfulQuestionHandler from'./HelpfulAndReport/HelpfulQuestionHandler';import AddQuestion from'./AddQuestionAndAnswer/AddQuestion.jsx';import sortingFunctions from'./SortingFunctions.js';import SearchBarComponent from'./SearchBarComponent.jsx';import MoreQuestionsButton from'./MoreQuestionsButton.jsx';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Questions=function Questions(_ref){var product_id=_ref.product_id,name=_ref.name;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),allQuestions=_useState2[0],setAllQuestions=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),questions=_useState4[0],setQuestions=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),displayedQuestions=_useState6[0],setDisplayedQuestions=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),questionCount=_useState8[0],setQuestionCount=_useState8[1];var _useState9=useState(true),_useState10=_slicedToArray(_useState9,2),toggleQuestionReload=_useState10[0],setToggleQuestionReload=_useState10[1];var _useState11=useState(true),_useState12=_slicedToArray(_useState11,2),toggleAnswerReload=_useState12[0],setToggleAnswerReload=_useState12[1];useEffect(function(){axios.get('http://127.0.0.1:3004/qa/questions',{params:{product_id:product_id,count:1000}}).then(function(questions){var sortedByAnswered=sortingFunctions.sortByAnswered(questions.data.results);setAllQuestions(sortedByAnswered);setQuestions(sortedByAnswered);}).catch(function(err){console.log(err);});},[product_id,toggleQuestionReload]);useEffect(function(){setQuestionCount(4);},[product_id]);useEffect(function(){setDisplayedQuestions(questions.slice(0,questionCount));},[questions,questionCount]);var handleMoreClick=function handleMoreClick(event){setQuestionCount(questionCount+2);};var handleCollapseClick=function handleCollapseClick(event){setQuestionCount(4);};var toggleQuestionReloadOnFormSubmit=function toggleQuestionReloadOnFormSubmit(){setToggleQuestionReload(!toggleQuestionReload);};var toggleAnswerReloadOnFormSubmit=function toggleAnswerReloadOnFormSubmit(){setToggleAnswerReload(!toggleAnswerReload);};var sortQuestionsBySearchTerm=function sortQuestionsBySearchTerm(event){if(event.length>2){var filteredQuestions=questions.filter(function(question){return question.question_body.toLowerCase().includes(event.toLowerCase());});setQuestions(filteredQuestions);}else{setQuestions(allQuestions);}};return/*#__PURE__*/_jsxs(Grid,{children:[/*#__PURE__*/_jsx(SearchBarComponent,{sortQuestionsBySearchTerm:sortQuestionsBySearchTerm}),/*#__PURE__*/_jsx(Box,{style:{maxHeight:'75vh',overflow:'auto'},children:/*#__PURE__*/_jsx(Grid,{children:_.map(displayedQuestions,function(question){return/*#__PURE__*/_jsxs(Grid,{children:[question.question_id!==displayedQuestions[0].question_id&&/*#__PURE__*/_jsx(Box,{pt:1.5,children:/*#__PURE__*/_jsx(Divider,{variant:\"middle\"})}),/*#__PURE__*/_jsxs(Grid,{container:true,children:[/*#__PURE__*/_jsxs(Grid,{item:true,xs:12,sm:9,children:[/*#__PURE__*/_jsx(Box,{pt:2,children:/*#__PURE__*/_jsx(Typography,{children:/*#__PURE__*/_jsxs(\"b\",{children:[\"Q: \",question.question_body]})})}),/*#__PURE__*/_jsx(Box,{pt:1.5,children:/*#__PURE__*/_jsx(Answers,{toggleAnswerReload:toggleAnswerReload,question_id:question.question_id})})]}),/*#__PURE__*/_jsx(Grid,{item:true,xs:12,sm:3,children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(HelpfulQuestionHandler,{toggleAnswerReloadOnFormSubmit:toggleAnswerReloadOnFormSubmit,question:question,name:name})})})]})]},question.question_id);})})}),/*#__PURE__*/_jsx(Box,{pb:2,children:/*#__PURE__*/_jsxs(Grid,{container:true,direction:\"row\",children:[questions.length&&questions.length!==displayedQuestions.length?/*#__PURE__*/_jsx(MoreQuestionsButton,{text:\"More Answered Questions\",handleClick:handleMoreClick}):questions.length>4&&/*#__PURE__*/_jsx(MoreQuestionsButton,{text:\"Collapse Questions\",handleClick:handleCollapseClick}),/*#__PURE__*/_jsx(AddQuestion,{toggleQuestionReloadOnFormSubmit:toggleQuestionReloadOnFormSubmit,product_id:product_id,name:name})]})})]});};export default Questions;","map":{"version":3,"sources":["/home/eric-cruz/Desktop/VS/Senior-HR/FEC/project-catwalk/client/src/qa-components/Questions.jsx"],"names":["React","useState","useEffect","Grid","Box","Typography","Divider","axios","_","Answers","HelpfulQuestionHandler","AddQuestion","sortingFunctions","SearchBarComponent","MoreQuestionsButton","Questions","product_id","name","allQuestions","setAllQuestions","questions","setQuestions","displayedQuestions","setDisplayedQuestions","questionCount","setQuestionCount","toggleQuestionReload","setToggleQuestionReload","toggleAnswerReload","setToggleAnswerReload","get","params","count","then","sortedByAnswered","sortByAnswered","data","results","catch","err","console","log","slice","handleMoreClick","event","handleCollapseClick","toggleQuestionReloadOnFormSubmit","toggleAnswerReloadOnFormSubmit","sortQuestionsBySearchTerm","length","filteredQuestions","filter","question","question_body","toLowerCase","includes","maxHeight","overflow","map","question_id"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Grid, Box, Typography, Divider } from '@material-ui/core';\nimport axios from 'axios';\nimport _ from 'underscore';\nimport Answers from './Answers.jsx';\nimport HelpfulQuestionHandler from './HelpfulAndReport/HelpfulQuestionHandler';\nimport AddQuestion from './AddQuestionAndAnswer/AddQuestion.jsx';\nimport sortingFunctions from './SortingFunctions.js';\nimport SearchBarComponent from './SearchBarComponent.jsx';\nimport MoreQuestionsButton from './MoreQuestionsButton.jsx';\n\nconst Questions = ({ product_id, name }) => {\n  const [allQuestions, setAllQuestions] = useState([]);\n  const [questions, setQuestions] = useState([]);\n  const [displayedQuestions, setDisplayedQuestions] = useState([]);\n  const [questionCount, setQuestionCount] = useState(0);\n  const [toggleQuestionReload, setToggleQuestionReload] = useState(true);\n  const [toggleAnswerReload, setToggleAnswerReload] = useState(true);\n\n  useEffect(() => {\n    axios.get('http://127.0.0.1:3004/qa/questions', {\n      params: {\n        product_id: product_id,\n        count: 1000\n      }\n    })\n      .then(questions => {\n        const sortedByAnswered = sortingFunctions.sortByAnswered(questions.data.results);\n        setAllQuestions(sortedByAnswered)\n        setQuestions(sortedByAnswered);\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  }, [product_id, toggleQuestionReload]);\n\n  useEffect(() => {\n    setQuestionCount(4);\n  }, [product_id])\n\n  useEffect(() => {\n    setDisplayedQuestions(questions.slice(0, questionCount))\n  }, [questions, questionCount])\n\n  const handleMoreClick = (event) => {\n    setQuestionCount(questionCount + 2);\n  }\n\n  const handleCollapseClick = (event) => {\n    setQuestionCount(4);\n  }\n\n  const toggleQuestionReloadOnFormSubmit = () => {\n    setToggleQuestionReload(!toggleQuestionReload);\n  }\n\n  const toggleAnswerReloadOnFormSubmit = () => {\n    setToggleAnswerReload(!toggleAnswerReload);\n  }\n\n  const sortQuestionsBySearchTerm = (event) => {\n    if (event.length > 2) {\n      const filteredQuestions = questions.filter(question =>\n        question.question_body.toLowerCase().includes(event.toLowerCase())\n      );\n      setQuestions(filteredQuestions);\n    } else {\n      setQuestions(allQuestions);\n    }\n  }\n\n  return (\n    <Grid>\n      <SearchBarComponent sortQuestionsBySearchTerm={sortQuestionsBySearchTerm} />\n      <Box style={{maxHeight: '75vh', overflow: 'auto'}}>\n        <Grid>\n          {_.map(displayedQuestions, question =>\n            <Grid key={question.question_id}>\n              {question.question_id !== displayedQuestions[0].question_id &&\n                <Box pt={1.5}><Divider variant=\"middle\" /></Box>\n              }\n              <Grid container>\n                <Grid item xs={12} sm={9}>\n                  <Box pt={2}>\n                    <Typography>{<b>Q: {question.question_body}</b>}</Typography>\n                  </Box>\n                  <Box pt={1.5}>\n                    <Answers\n                      toggleAnswerReload={toggleAnswerReload}\n                      question_id={question.question_id}\n                    />\n                  </Box>\n                </Grid>\n                <Grid item xs={12} sm={3}>\n                  <Box>\n                    <HelpfulQuestionHandler\n                      toggleAnswerReloadOnFormSubmit={toggleAnswerReloadOnFormSubmit}\n                      question={question}\n                      name={name}\n                    />\n                  </Box>\n                </Grid>\n              </Grid>\n            </Grid>\n          )}\n        </Grid>\n      </Box>\n        <Box pb={2}>\n          <Grid container direction=\"row\">\n            { questions.length && questions.length !== displayedQuestions.length\n              ? <MoreQuestionsButton text=\"More Answered Questions\" handleClick={handleMoreClick} />\n              : questions.length > 4 &&\n              <MoreQuestionsButton text=\"Collapse Questions\" handleClick={handleCollapseClick} />\n            }\n            <AddQuestion\n              toggleQuestionReloadOnFormSubmit={toggleQuestionReloadOnFormSubmit}\n              product_id={product_id}\n              name={name}\n            />\n          </Grid>\n        </Box>\n    </Grid>\n  )\n}\n\nexport default Questions;"]},"metadata":{},"sourceType":"module"}